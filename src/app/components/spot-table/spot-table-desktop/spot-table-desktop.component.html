<table
  class="spot-table"
  mat-table
  [dataSource]="spotSource"
  matSort
  matSortActive="equity"
  matSortDirection="desc"
  matSortDisableClear="true"
  [attr.hidden]="!spotSource.data.length ? true : null"
>
  <ng-container matColumnDef="currency">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Currency</th>
    <td mat-cell *matCellDef="let coin">{{ coin.name }}</td>
  </ng-container>

  <ng-container matColumnDef="equity">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Equity</th>
    <td mat-cell *matCellDef="let coin">
      {{ coin.totalCoins }}<br />
      @if (spotTableSettingsService.showPriceIncludingExchangeFees()) {
        <small class="txt-gray"> {{ coin.totalCostWithoutFees | currency : 'USD' : 'symbol' : '1.2-2' }} </small>
      } @else {
        <small class="txt-gray"> {{ coin.totalCost | currency : 'USD' : 'symbol' : '1.2-2' }} </small>
      }
    </td>
  </ng-container>

  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      <div>
        Price<br />
        <small class="txt-gray">cur / buy</small>
      </div>
    </th>
    <td mat-cell *matCellDef="let coin">
      {{ coin.marketPrice | currency : 'USD' : 'symbol' : '1.2-3' }}<br />

      @if (spotTableSettingsService.showPriceIncludingExchangeFees()) {
        {{ coin.priceOfProfit | currency : 'USD' : 'symbol' : '1.2-3' }}
      } @else {
        {{ coin.avgBuyPrice | currency : 'USD' : 'symbol' : '1.2-3' }}
      }
    </td>
  </ng-container>

  <ng-container matColumnDef="profit">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Profit</th>
    <td
      mat-cell
      *matCellDef="let coin"
      [ngClass]="{ 'txt-color-positive': coin.profit > 0, 'txt-color-negative': coin.profit < 0 }"
    >
      {{ coin.profit | currency : 'USD' : 'symbol' : '1.2-2' }}<br />
      <small>{{ coin.prcProfit | number : '1.2-2' }}%</small>
    </td>
  </ng-container>

  <ng-container matColumnDef="totalProfit">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Total Profit</th>
    <td
      mat-cell
      *matCellDef="let coin"
      [ngClass]="{
        'txt-color-positive': coin.totalProfit > 0,
        'txt-color-negative': coin.totalProfit < 0
      }"
    >
      {{ coin.totalProfit | currency : 'USD' : 'symbol' : '1.2-2' }}
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
