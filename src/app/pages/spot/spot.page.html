<ion-menu side="end" contentId="spot-content" menuId="spot-settings">
  <ion-header>
    <ion-toolbar>
      <ion-title>Spot Settings</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list class="table-settings-list">
      <ion-item>
        <ion-toggle
          [checked]="spotTableSettingsService.hideCoinsLessThanOneDollar()"
          justify="space-between"
          (ionChange)="spotTableSettingsService.hideCoinsLessThanOneDollar.set($event.detail.checked)"
          >Hide coins less $1</ion-toggle
        >
      </ion-item>
      <ion-item>
        <ion-toggle
          [checked]="spotTableSettingsService.hideZeroBuyCoins()"
          justify="space-between"
          helperText="Hide coins which you haven't bought. For example coins from staking or airdrop"
          (ionChange)="spotTableSettingsService.hideZeroBuyCoins.set($event.detail.checked)"
          >Hide zero buy coins</ion-toggle
        >
      </ion-item>
    </ion-list>
  </ion-content>
</ion-menu>

<div class="ion-page" id="spot-content">
  <ion-header [translucent]="true">
    <ion-toolbar>
      <ion-buttons>
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title>Spot</ion-title>
      @if(coins().length) {
      <ion-text
        class="ion-padding-end text-bold text-xl"
        [ngClass]="{
          'txt-color-positive': totalSpotProfit() > 0,
          'txt-color-negative': totalSpotProfit() < 0
        }"
        slot="secondary"
      >
        {{ totalSpotProfit() | currency:'USD':'symbol':'1.2-2' }}
      </ion-text>
      }
      @if (hasCredentials()) {
        <ion-buttons slot="primary">
          <ion-menu-toggle menu="spot-settings">
            <ion-button fill="clear">
              <ion-icon slot="icon-only" name="settings-outline"></ion-icon>
            </ion-button>
          </ion-menu-toggle>
          <ion-button fill="clear" (click)="syncData()">
            @if (bybitAPITxsService.isLoading()) {
            <ion-icon slot="icon-only" class="rotate" name="sync-outline"></ion-icon>
            } @else {
            <ion-icon slot="icon-only" name="cloud-download-outline"></ion-icon>
            }
          </ion-button>
        </ion-buttons>
      }
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true">
    <ion-refresher slot="fixed" (ionRefresh)="refresh($event)">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

    @if(isHandset$ | async) {
    <app-spot-table-mobile></app-spot-table-mobile>
    } @else {
    <app-spot-table-desktop></app-spot-table-desktop>
    } @if(!coins().length) {
    <div class="no-data">
      @if(isLoading()) {
      <ion-spinner color="secondary"></ion-spinner>
      } @else if(hasCredentials()) {
      <ion-button (click)="syncData()">
        Get Data @if (bybitAPITxsService.isLoading()) {
        <ion-icon slot="end" class="rotate" name="sync-outline"></ion-icon>
        } @else {
        <ion-icon slot="end" name="cloud-download-outline"></ion-icon>
        }
      </ion-button>
      } @else {
      <ion-button routerLink="/credentials">Set Credentials</ion-button>
      }
    </div>
    }

    <!-- <ion-fab slot="fixed" vertical="bottom" horizontal="end">
      <ion-fab-button class="float-btn" [disabled]="isLoading()">
        <ion-icon name="menu"></ion-icon>
      </ion-fab-button>

      <ion-fab-list side="start">
        <ion-fab-button color="secondary" [disabled]="isLoading()" (click)="openFilePicker()">
          <ion-icon name="document-outline"></ion-icon>
        </ion-fab-button>
        <ion-fab-button
          id="present-alert"
          color="danger"
          [disabled]="isLoading()"
          [hidden]="!coins().length"
        >
          <ion-icon name="trash-outline"></ion-icon>
        </ion-fab-button>
      </ion-fab-list>
    </ion-fab> -->

    <!-- <ion-alert
      trigger="present-alert"
      header="Be Careful!"
      subHeader="Are you sure you want to delete all spot transactions?"
      message="This action cannot be undone."
      [buttons]="alertButtons"
    ></ion-alert> -->
  </ion-content>
</div>

<!-- <input
  #fileInput
  type="file"
  accept=".csv,text/csv,application/csv,application/vnd.ms-excel,text/plain"
  multiple
  hidden
  (change)="onFileSelected($event)"
/> -->
